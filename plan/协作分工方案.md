# 以撒复刻项目 - 协作分工方案

## 📋 两人分工方案

### 👤 开发者A：玩家与房间系统

**负责模块：**
- ✅ 1.1 项目结构设置（协作完成）
- ✅ 1.2 角色移动系统
- ✅ 1.4 简单房间系统
- 🔄 后续：房间管理、地图生成系统

**核心职责：**
- 玩家角色控制
- 房间边界和碰撞
- 房间切换逻辑
- 地图生成算法

---

### 👤 开发者B：战斗与敌人系统

**负责模块：**
- ✅ 1.1 项目结构设置（协作完成）
- ✅ 1.3 基础射击系统
- 🔄 后续：敌人系统、战斗系统、道具系统

**核心职责：**
- 射击系统实现
- 敌人AI和行为
- 战斗机制
- 道具效果系统

---

## 🚀 下一步可执行任务

### 第一步：项目结构设置（今天完成，预计1-2小时）

**两人协作完成：**

#### 1. 创建文件夹结构
```
isaac/
├── scenes/                    # 场景文件夹
│   ├── player/               # 玩家相关场景（开发者A）
│   ├── enemies/              # 敌人相关场景（开发者B）
│   │   ├── base/            # 敌人基类场景
│   │   ├── types/           # 具体敌人类型
│   │   └── spawners/        # 敌人生成器
│   ├── rooms/                # 房间相关场景（开发者A）
│   │   ├── base/            # 基础房间场景
│   │   ├── types/           # 房间类型（普通、Boss、商店等）
│   │   ├── doors/           # 房间门
│   │   └── walls/           # 墙壁和障碍物
│   ├── projectiles/          # 子弹相关场景（开发者B）
│   │   ├── base/            # 基础子弹场景
│   │   ├── types/           # 子弹类型
│   │   └── pools/           # 对象池（后续优化）
│   ├── items/                # 道具相关场景（开发者B）
│   │   ├── base/            # 道具基类场景
│   │   ├── collectibles/    # 可收集道具
│   │   └── pickups/         # 拾取物（心、硬币等）
│   ├── ui/                   # UI场景
│   ├── managers/             # 管理器场景
│   └── test/                 # 测试场景
│
├── scripts/                   # 脚本文件夹
│   ├── player/              # 玩家脚本（开发者A）
│   ├── enemies/             # 敌人脚本（开发者B）
│   │   ├── base/           # 敌人基类
│   │   ├── types/          # 具体敌人脚本
│   │   └── ai/             # AI行为脚本
│   ├── rooms/               # 房间脚本（开发者A）
│   ├── projectiles/         # 子弹脚本（开发者B）
│   ├── items/               # 道具脚本（开发者B）
│   │   ├── base/           # 道具基类
│   │   ├── collectibles/   # 可收集道具脚本
│   │   └── pickups/        # 拾取物脚本
│   ├── managers/            # 管理器脚本（共享）
│   ├── ui/                  # UI脚本
│   ├── combat/              # 战斗系统脚本（开发者B）
│   ├── utils/               # 工具脚本（共享）
│   └── autoload/            # 自动加载脚本（共享）
│
├── resources/                 # 资源文件夹
│   ├── textures/            # 纹理/图片资源
│   │   ├── player/         # 玩家贴图
│   │   ├── enemies/        # 敌人贴图
│   │   ├── rooms/          # 房间贴图
│   │   ├── items/          # 道具贴图
│   │   ├── projectiles/    # 子弹贴图
│   │   └── ui/             # UI贴图
│   ├── audio/               # 音频资源
│   │   ├── music/          # 背景音乐
│   │   └── sfx/            # 音效
│   ├── data/                # 数据文件
│   ├── materials/           # 材质资源
│   └── shaders/             # 着色器
│
├── assets/                    # 外部资源
│   ├── placeholders/        # 占位符资源
│   └── sprites/             # 精灵图
│
├── docs/                      # 项目文档
│   ├── api/                 # API文档
│   ├── design/              # 设计文档
│   └── notes/               # 开发笔记
│
└── addons/                    # 插件文件夹
```

#### 2. 配置项目设置（一人负责，另一人review）

**输入映射设置：**
- `move_up` → W / ↑
- `move_down` → S / ↓
- `move_left` → A / ←
- `move_right` → D / →
- `shoot` → 鼠标左键
- 瞄准方向：鼠标位置相对于角色的方位

**物理层设置：**
- Layer 1: Player（玩家）
- Layer 2: Enemies（敌人）
- Layer 3: Projectiles（子弹）
- Layer 4: Items（道具）

**碰撞层设置：**
- 同上物理层设置

---

### 第二步：并行开发（项目结构完成后立即开始）

#### 👤 开发者A任务：角色移动系统

**任务清单：**

1. **创建Player场景**
   - 文件：`scenes/player/Player.tscn`
   - 节点结构：
     ```
     Player (CharacterBody2D)
     ├── CollisionShape2D
     └── ColorRect (占位符，16x16红色方块)
     ```

2. **实现Player脚本**
   - 文件：`scripts/player/Player.gd`
   - 功能要求：
     - ✅ 8方向移动（WASD/方向键）
     - ✅ 移动速度：200-300 pixels/second
     - ✅ 房间边界限制（先硬编码，后续接入房间系统）
     - ✅ 平滑移动处理

**验收标准：**
- [ ] 玩家可以用WASD/方向键移动
- [ ] 移动流畅，无卡顿
- [ ] 玩家不会移出房间边界

---

#### 👤 开发者B任务：基础射击系统

**任务清单：**

1. **创建Projectile场景**
   - 文件：`scenes/projectiles/Projectile.tscn`
   - 节点结构：
     ```
     Projectile (Area2D)
     ├── CollisionShape2D
     └── ColorRect (占位符，8x8黄色方块)
     ```

2. **实现Projectile脚本**
   - 文件：`scripts/projectiles/Projectile.gd`
   - 功能要求：
     - ✅ 子弹移动逻辑
     - ✅ 子弹销毁（超出屏幕或碰撞后）
     - ✅ 射击冷却时间（0.3-0.5秒）

3. **在Player中集成射击功能**
   - 在Player脚本中添加射击方法
   - 响应鼠标左键射击输入
   - 根据鼠标位置相对于角色的方位计算射击方向
   - 生成子弹实例

**验收标准：**
- [ ] 玩家可以用鼠标瞄准（鼠标位置相对于角色的方位）
- [ ] 玩家可以用鼠标左键射击
- [ ] 子弹正常移动和销毁
- [ ] 射击有冷却时间限制
- [ ] 子弹不会无限生成

---

### 第三步：集成测试（两人一起完成）

**任务清单：**

1. **创建测试场景**
   - 文件：`scenes/TestRoom.tscn`
   - 场景内容：
     - 添加一个简单的房间边界（ColorRect，例如800x600）
     - 添加玩家实例
     - 设置相机跟随玩家

2. **功能验证**
   - [ ] 玩家可以8方向移动
   - [ ] 玩家可以用鼠标瞄准和射击（鼠标左键）
   - [ ] 子弹正常生成和销毁
   - [ ] 玩家不会移出房间边界
   - [ ] 射击冷却正常工作

---

## 📝 开发规范

### 代码接口约定

为了便于协作，需要定义清晰的接口：

**Player脚本接口：**
```gdscript
# Player.gd 应该暴露的方法
func shoot(direction: Vector2) -> void
func get_position() -> Vector2
func take_damage(amount: int) -> void
```

**Projectile脚本接口：**
```gdscript
# Projectile.gd 应该暴露的方法
func initialize(start_position: Vector2, direction: Vector2, speed: float) -> void
```

### 版本控制建议

1. **使用Git进行版本控制**
   - 主分支：`main` 或 `master`
   - 开发分支：`dev-a`（开发者A）、`dev-b`（开发者B）
   - 功能分支：`feature/player-movement`、`feature/shooting-system`

2. **提交规范**
   - 提交信息格式：`[模块] 功能描述`
   - 示例：`[Player] 实现8方向移动系统`

3. **避免冲突**
   - 不同模块分开开发，减少文件冲突
   - 每日结束前合并代码并测试
   - 遇到冲突及时沟通解决

### 沟通建议

1. **每日同步**
   - 每天开始前：同步最新代码
   - 每天结束前：提交代码并合并
   - 遇到问题及时沟通

2. **接口变更**
   - 如需修改接口，提前通知对方
   - 保持接口文档更新

---

## 🎯 本周目标

- [x] 完成项目结构设置
- [ ] 完成角色移动系统（开发者A）
- [ ] 完成基础射击系统（开发者B）
- [ ] 实现基础集成测试

**完成标准：**
完成以上任务后，你们将拥有一个可以移动、可以射击的基础原型，为后续添加敌人和战斗系统打下基础。

---

## 📚 参考资源

### Godot 4.x 相关文档
- [CharacterBody2D 文档](https://docs.godotengine.org/en/stable/classes/class_characterbody2d.html)
- [Area2D 文档](https://docs.godotengine.org/en/stable/classes/class_area2d.html)
- [输入系统](https://docs.godotengine.org/en/stable/tutorials/inputs/index.html)

### 开发技巧
- 使用 `_process(delta)` 处理移动逻辑
- 使用 `_physics_process(delta)` 处理物理相关逻辑
- 使用信号（Signals）进行模块间通信
- 使用对象池优化子弹性能（后续优化）

---

## ✅ 任务进度跟踪

### 阶段1：基础框架搭建（MVP）

- [ ] **1.1 项目结构设置** - 协作完成
  - [ ] 创建文件夹结构
  - [ ] 配置输入映射
  - [ ] 配置物理层和碰撞层

- [ ] **1.2 角色移动系统** - 开发者A
  - [ ] 创建Player场景
  - [ ] 实现8方向移动
  - [ ] 实现房间边界限制

- [ ] **1.3 基础射击系统** - 开发者B
  - [ ] 创建Projectile场景
  - [ ] 实现鼠标瞄准射击（鼠标位置相对于角色的方位）
  - [ ] 实现鼠标左键射击控制
  - [ ] 实现射击冷却

- [ ] **1.4 简单房间系统** - 开发者A
  - [ ] 创建Room场景
  - [ ] 实现房间边界
  - [ ] 实现基础碰撞检测

---

**最后更新：** 2024年

**下一步行动：** 开始第一步 - 项目结构设置
