---
name: 以撒复刻开发计划
overview: 创建一个分阶段的开发计划，从最基础的"丑图"原型开始，逐步实现The Binding of Isaac的核心功能
todos:
  - id: setup-project
    content: 设置Godot项目结构：创建场景和脚本文件夹，配置输入映射、物理层和碰撞层
    status: pending
  - id: player-movement
    content: 实现玩家移动系统：创建Player场景，实现8方向移动，添加房间边界限制
    status: pending
    dependencies:
      - setup-project
  - id: shooting-system
    content: 实现基础射击系统：创建Projectile场景，实现鼠标瞄准射击（鼠标位置相对于角色的方位），鼠标左键控制射击，添加射击冷却
    status: pending
    dependencies:
      - player-movement
  - id: room-system
    content: 实现基础房间系统：创建Room场景，实现房间边界和碰撞检测 lalala
    status: pending
    dependencies:
      - setup-project
  - id: enemy-base
    content: 实现敌人基础系统：创建Enemy基类，实现简单AI和碰撞伤害
    status: pending
    dependencies:
      - room-system
  - id: combat-system
    content: 完善战斗系统：实现子弹与敌人碰撞，伤害系统，玩家生命值
    status: pending
    dependencies:
      - shooting-system
      - enemy-base
  - id: map-generation
    content: 实现地图生成系统：网格地图，房间连接，房间门系统
    status: pending
    dependencies:
      - room-system
  - id: item-system
    content: 实现道具系统：属性管理，道具拾取，基础道具效果
    status: pending
    dependencies:
      - combat-system
  - id: game-loop
    content: 完善游戏循环：游戏状态管理，死亡重生，基础UI
    status: pending
    dependencies:
      - map-generation
      - item-system
---

# The Binding of Isaac 复刻开发计划

## 项目概述

使用Godot引擎从零开始复刻The Binding of Isaac: Rebirth，采用"丑图"（占位图）方式快速原型开发，逐步迭代完善。

## 技术栈

- **引擎**: Godot 4.x
- **语言**: GDScript
- **图形**: 初期使用简单几何图形和颜色块作为占位符

## 开发阶段

### 阶段1: 基础框架搭建（MVP）

**目标**: 实现最基础的可玩原型

#### 1.1 项目结构设置

- 创建场景结构：`scenes/player/`, `scenes/enemies/`, `scenes/rooms/`, `scenes/projectiles/`
- 创建脚本结构：`scripts/player/`, `scripts/enemies/`, `scripts/rooms/`, `scripts/items/`
- 设置项目设置：输入映射、物理层、碰撞层

#### 1.2 角色移动系统

- 创建Player场景（使用简单的ColorRect或Sprite作为占位符）
- 实现8方向移动（WASD/方向键）
- 添加移动动画和速度控制
- 实现房间边界限制

#### 1.3 基础射击系统

- 创建Projectile场景（简单矩形/圆形占位符）
- 实现鼠标瞄准射击（鼠标位置相对于角色的方位）
- 鼠标左键控制射击
- 子弹生成、移动和销毁逻辑
- 射击冷却时间

#### 1.4 简单房间系统

- 创建Room场景（使用ColorRect绘制房间边界）
- 实现房间切换逻辑
- 基础碰撞检测（玩家与墙壁）

### 阶段2: 敌人和战斗系统

**目标**: 添加基础敌人和战斗机制

#### 2.1 敌人基础系统

- 创建Enemy基类
- 实现简单敌人AI（追踪玩家）
- 敌人碰撞伤害系统
- 敌人生命值和死亡逻辑

#### 2.2 战斗系统完善

- 子弹与敌人碰撞检测
- 敌人伤害和死亡效果
- 玩家生命值系统
- 简单的伤害反馈

#### 2.3 敌人类型扩展

- 实现2-3种不同类型的敌人（移动模式不同）
- 敌人生成系统（房间内随机生成）

### 阶段3: 房间和地图系统

**目标**: 实现房间布局和地图生成

#### 3.1 房间类型

- 普通房间
- 起始房间
- Boss房间（占位）
- 商店房间（占位）

#### 3.2 地图生成

- 简单的网格地图系统
- 房间连接逻辑
- 房间门系统（进入/离开）

#### 3.3 房间清理机制

- 敌人全部击败后开门
- 房间状态管理

### 阶段4: 道具系统

**目标**: 实现基础道具和属性系统

#### 4.1 属性系统

- 玩家属性管理（伤害、射速、移动速度、生命值等）
- 属性修改器系统

#### 4.2 道具基础

- 创建Item基类
- 道具拾取系统
- 实现3-5个基础道具（如增加伤害、增加射速等）

#### 4.3 道具效果

- 道具效果应用逻辑
- 道具UI显示（简单的文本列表）

### 阶段5: 游戏循环和进度

**目标**: 完善游戏流程

#### 5.1 游戏状态管理

- 游戏开始/结束逻辑
- 死亡和重生系统
- 简单的游戏UI（生命值、道具列表）

#### 5.2 Boss战系统

- 实现一个简单的Boss
- Boss房间特殊逻辑
- Boss击败后的奖励

#### 5.3 随机性

- 房间随机生成
- 敌人随机生成
- 道具随机掉落

### 阶段6: 优化和扩展

**目标**: 完善游戏体验

#### 6.1 视觉效果改进

- 添加简单的粒子效果
- 改进占位图（使用更好的几何图形）
- 添加简单的动画

#### 6.2 音效系统

- 添加音效（射击、敌人死亡、拾取道具等）
- 背景音乐

#### 6.3 游戏平衡

- 调整数值平衡
- 优化游戏难度曲线

## 文件结构建议

```
copy-isaac/
├── scenes/
│   ├── player/
│   │   └── Player.tscn
│   ├── enemies/
│   │   ├── EnemyBase.tscn
│   │   └── [具体敌人类型]
│   ├── rooms/
│   │   ├── Room.tscn
│   │   └── RoomManager.tscn
│   ├── projectiles/
│   │   └── Projectile.tscn
│   └── items/
│       └── ItemBase.tscn
├── scripts/
│   ├── player/
│   │   └── Player.gd
│   ├── enemies/
│   │   ├── EnemyBase.gd
│   │   └── [具体敌人脚本]
│   ├── rooms/
│   │   ├── Room.gd
│   │   └── RoomManager.gd
│   ├── projectiles/
│   │   └── Projectile.gd
│   ├── items/
│   │   ├── ItemBase.gd
│   │   └── [具体道具脚本]
│   └── managers/
│       ├── GameManager.gd
│       └── StatsManager.gd
├── resources/
│   └── [资源文件]
└── project.godot
```

## 开发建议

1. **从最小可行产品开始**: 先实现一个可以移动和射击的角色，在单个房间内与敌人战斗
2. **逐步迭代**: 每完成一个功能就测试，确保稳定后再添加新功能
3. **保持简单**: 初期使用最简单的实现方式，后续再优化
4. **代码复用**: 使用继承和组合模式，避免重复代码
5. **测试驱动**: 每个阶段都要可玩，不要等到所有功能完成再测试

## 关键技术点

- **输入处理**: 使用Godot的Input系统处理键盘输入
- **物理系统**: 使用Area2D和CollisionShape2D进行碰撞检测
- **场景管理**: 使用场景树和信号系统管理游戏状态
- **对象池**: 对于子弹等频繁创建销毁的对象，考虑使用对象池优化性能