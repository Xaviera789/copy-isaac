---
name: é˜¶æ®µ2åä½œåˆ†å·¥æ–¹æ¡ˆ
overview: ""
todos: []
---

# é˜¶æ®µ2ï¼šæ•Œäººå’Œæˆ˜æ–—ç³»ç»Ÿ - åä½œåˆ†å·¥æ–¹æ¡ˆ

## ğŸ“‹ é˜¶æ®µæ¦‚è¿°

**ç›®æ ‡**: æ·»åŠ åŸºç¡€æ•Œäººå’Œæˆ˜æ–—æœºåˆ¶ï¼Œå®ç°ç©å®¶ä¸æ•Œäººçš„å®Œæ•´æˆ˜æ–—å¾ªç¯

**åŒ…å«å†…å®¹**:

- 2.1 æ•ŒäººåŸºç¡€ç³»ç»Ÿ
- 2.2 æˆ˜æ–—ç³»ç»Ÿå®Œå–„  
- 2.3 æ•Œäººç±»å‹æ‰©å±•

---

## ğŸ‘¥ å¼€å‘è€…åˆ†å·¥

### ğŸ‘¤ å¼€å‘è€…Aï¼šç©å®¶ä¸æˆ¿é—´ç³»ç»Ÿ

**è´Ÿè´£æ¨¡å—ï¼š**

- âœ… é˜¶æ®µ1å·²å®Œæˆï¼šç©å®¶ç§»åŠ¨ã€æˆ¿é—´è¾¹ç•Œ
- ğŸ”„ é˜¶æ®µ2ä»»åŠ¡ï¼š
  - **ç©å®¶ç”Ÿå‘½å€¼ç³»ç»Ÿ**ï¼ˆ2.2çš„ä¸€éƒ¨åˆ†ï¼‰
  - **æˆ¿é—´æ•Œäººç”Ÿæˆæ”¯æŒ**ï¼ˆ2.3çš„ä¸€éƒ¨åˆ†ï¼Œä¸å¼€å‘è€…Båä½œï¼‰

**æ ¸å¿ƒèŒè´£ï¼š**

- åœ¨Playerè„šæœ¬ä¸­æ·»åŠ ç”Ÿå‘½å€¼ã€ä¼¤å®³ã€æ­»äº¡é€»è¾‘
- æä¾›ç©å®¶ä½ç½®æŸ¥è¯¢æ¥å£ä¾›æ•ŒäººAIä½¿ç”¨
- å®ç°ç®€å•çš„ä¼¤å®³åé¦ˆæ•ˆæœï¼ˆé—ªçƒã€æ— æ•Œå¸§ç­‰ï¼‰
- ä¸ºæ•Œäººç”Ÿæˆç³»ç»Ÿæä¾›æˆ¿é—´è¾¹ç•Œå’Œç”Ÿæˆä½ç½®æ”¯æŒ

---

### ğŸ‘¤ å¼€å‘è€…Bï¼šæˆ˜æ–—ä¸æ•Œäººç³»ç»Ÿ

**è´Ÿè´£æ¨¡å—ï¼š**

- âœ… é˜¶æ®µ1å·²å®Œæˆï¼šå°„å‡»ç³»ç»Ÿã€å­å¼¹ç³»ç»Ÿ
- ğŸ”„ é˜¶æ®µ2ä»»åŠ¡ï¼š
  - **æ•ŒäººåŸºç¡€ç³»ç»Ÿ**ï¼ˆ2.1ï¼‰
  - **æˆ˜æ–—ç³»ç»Ÿå®Œå–„**ï¼ˆ2.2çš„ä¸»è¦éƒ¨åˆ†ï¼‰
  - **æ•Œäººç±»å‹æ‰©å±•**ï¼ˆ2.3ï¼‰

**æ ¸å¿ƒèŒè´£ï¼š**

- åˆ›å»ºEnemyåŸºç±»å’Œåœºæ™¯
- å®ç°æ•ŒäººAIï¼ˆè¿½è¸ªç©å®¶ï¼‰
- å®ç°æ•Œäººç¢°æ’ä¼¤å®³ã€ç”Ÿå‘½å€¼ã€æ­»äº¡é€»è¾‘
- å®Œå–„å­å¼¹ä¸æ•Œäººçš„ç¢°æ’æ£€æµ‹å’Œä¼¤å®³ç³»ç»Ÿ
- å®ç°å¤šç§æ•Œäººç±»å‹å’Œæ•Œäººç”Ÿæˆç³»ç»Ÿ

---

## ğŸš¨ å…³é”®è€¦åˆå…³ç³»ï¼ˆå¿…é¡»æ³¨æ„ï¼ï¼‰

### âš ï¸ ä¸²è¡Œå¼€å‘éƒ¨åˆ†ï¼ˆä¸èƒ½å¹¶è¡Œï¼‰

1. **æ•ŒäººåŸºç±»å¿…é¡»å…ˆå®Œæˆ**

   - å¼€å‘è€…Bå¿…é¡»å…ˆå®ŒæˆEnemyåŸºç±»ï¼ˆ2.1ï¼‰
   - ç„¶åæ‰èƒ½å®ç°å­å¼¹ä¸æ•Œäººçš„ç¢°æ’ï¼ˆ2.2ï¼‰
   - **åŸå› **: å­å¼¹ç¢°æ’æ£€æµ‹éœ€è¦Enemyçš„`take_damage()`æ–¹æ³•

2. **ç©å®¶ç”Ÿå‘½å€¼ç³»ç»Ÿéœ€è¦å…ˆå®Œæˆ**

   - å¼€å‘è€…Aéœ€è¦å…ˆå®Œæˆç©å®¶ç”Ÿå‘½å€¼ç³»ç»Ÿ
   - ç„¶åå¼€å‘è€…Bæ‰èƒ½å®ç°æ•Œäººå¯¹ç©å®¶çš„ç¢°æ’ä¼¤å®³
   - **åŸå› **: æ•Œäººç¢°æ’ä¼¤å®³éœ€è¦è°ƒç”¨Playerçš„`take_damage()`æ–¹æ³•

3. **æˆ˜æ–—ç³»ç»Ÿé›†æˆéœ€è¦æŒ‰é¡ºåº**

   - å…ˆå®Œæˆï¼šEnemyåŸºç±» + ç©å®¶ç”Ÿå‘½å€¼ç³»ç»Ÿ
   - å†å®Œæˆï¼šå­å¼¹ä¸æ•Œäººç¢°æ’ + æ•Œäººå¯¹ç©å®¶ç¢°æ’ä¼¤å®³
   - **åŸå› **: éœ€è¦åŒæ–¹æ¥å£éƒ½å‡†å¤‡å¥½æ‰èƒ½é›†æˆæµ‹è¯•

### âœ… å¯ä»¥å¹¶è¡Œå¼€å‘çš„éƒ¨åˆ†

1. **æ•ŒäººAIå¼€å‘å¯ä»¥ç‹¬ç«‹è¿›è¡Œ**

   - å¼€å‘è€…Bå¯ä»¥åœ¨åˆ›å»ºEnemyåŸºç±»åï¼Œç‹¬ç«‹å®ç°AIé€»è¾‘
   - åªéœ€è¦é€šè¿‡ä¿¡å·æˆ–ç›´æ¥è®¿é—®è·å–ç©å®¶ä½ç½®ï¼ˆPlayer.global_positionï¼‰

2. **æ•Œäººç±»å‹æ‰©å±•å¯ä»¥å¹¶è¡Œ**

   - åœ¨EnemyåŸºç±»å®Œæˆåï¼Œå¯ä»¥å¹¶è¡Œå®ç°å¤šç§æ•Œäººç±»å‹
   - ä½†éœ€è¦ç­‰æˆ˜æ–—ç³»ç»Ÿå®Œå–„åæ‰èƒ½å®Œæ•´æµ‹è¯•

3. **æ•Œäººç”Ÿæˆç³»ç»Ÿå¯ä»¥éƒ¨åˆ†å¹¶è¡Œ**

   - ç”Ÿæˆé€»è¾‘å¯ä»¥ç‹¬ç«‹å¼€å‘
   - ä½†éœ€è¦æˆ¿é—´ç³»ç»Ÿæä¾›è¾¹ç•Œä¿¡æ¯ï¼ˆå¼€å‘è€…Aæ”¯æŒï¼‰

---

## ğŸ“… å¼€å‘æ—¶é—´çº¿

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€ç³»ç»Ÿæ­å»ºï¼ˆä¸²è¡Œï¼Œå¿…é¡»æŒ‰é¡ºåºï¼‰

#### Step 1: æ•ŒäººåŸºç±»åˆ›å»ºï¼ˆå¼€å‘è€…Bï¼Œä¼˜å…ˆçº§æœ€é«˜ï¼‰

**é¢„è®¡æ—¶é—´**: 2-3å°æ—¶

**ä»»åŠ¡æ¸…å•ï¼š**

1. åˆ›å»ºEnemyåŸºç±»åœºæ™¯

   - æ–‡ä»¶ï¼š`scenes/enemies/base/EnemyBase.tscn`
   - èŠ‚ç‚¹ç»“æ„ï¼š
     ```
     EnemyBase (CharacterBody2D æˆ– Area2D)
     â”œâ”€â”€ CollisionShape2D
     â”œâ”€â”€ ColorRect (å ä½ç¬¦ï¼Œ16x16çº¢è‰²æ–¹å—ï¼ŒåŒºåˆ«äºç©å®¶)
     â””â”€â”€ HealthBar (å¯é€‰ï¼Œåç»­æ·»åŠ )
     ```


2. å®ç°EnemyBaseè„šæœ¬

   - æ–‡ä»¶ï¼š`scripts/enemies/base/EnemyBase.gd`
   - åŠŸèƒ½è¦æ±‚ï¼š
     - âœ… ç”Ÿå‘½å€¼ç³»ç»Ÿï¼ˆhp, max_hpï¼‰
     - âœ… `take_damage(amount: int)` æ–¹æ³•
     - âœ… `die()` æ–¹æ³•ï¼ˆæ­»äº¡é€»è¾‘ï¼‰
     - âœ… åŸºç¡€ç§»åŠ¨é€Ÿåº¦å±æ€§
     - âœ… ç¢°æ’æ£€æµ‹è®¾ç½®ï¼ˆä¸ç©å®¶ç¢°æ’ï¼‰

**æ¥å£å®šä¹‰ï¼š**

```gdscript
# EnemyBase.gd å¿…é¡»å®ç°çš„æ¥å£
func take_damage(amount: int) -> void
func die() -> void
var hp: int
var max_hp: int
```

**éªŒæ”¶æ ‡å‡†ï¼š**

- [ ] Enemyåœºæ™¯å¯ä»¥å®ä¾‹åŒ–
- [ ] Enemyæœ‰ç”Ÿå‘½å€¼å±æ€§
- [ ] Enemyå¯ä»¥æ¥æ”¶ä¼¤å®³ï¼ˆtake_damageæ–¹æ³•ï¼‰
- [ ] Enemyç”Ÿå‘½å€¼å½’é›¶æ—¶è°ƒç”¨dieæ–¹æ³•

---

#### Step 2: ç©å®¶ç”Ÿå‘½å€¼ç³»ç»Ÿï¼ˆå¼€å‘è€…Aï¼Œä¸Step 1å¹¶è¡Œå¼€å§‹ï¼Œä½†éœ€å…ˆå®Œæˆï¼‰

**é¢„è®¡æ—¶é—´**: 1-2å°æ—¶

**ä»»åŠ¡æ¸…å•ï¼š**

1. ä¿®æ”¹Playerè„šæœ¬

   - æ–‡ä»¶ï¼š`scripts/player/Player.gd`
   - æ·»åŠ åŠŸèƒ½ï¼š
     - âœ… ç”Ÿå‘½å€¼ç³»ç»Ÿï¼ˆhp, max_hpï¼Œä¾‹å¦‚3é¢—å¿ƒï¼‰
     - âœ… `take_damage(amount: int)` æ–¹æ³•
     - âœ… `die()` æ–¹æ³•ï¼ˆæ­»äº¡é€»è¾‘ï¼Œæš‚æ—¶å¯ä»¥åªæ˜¯æ‰“å°æˆ–é‡å¯åœºæ™¯ï¼‰
     - âœ… æ— æ•Œå¸§ç³»ç»Ÿï¼ˆå—ä¼¤åçŸ­æš‚æ— æ•Œï¼Œé˜²æ­¢è¿ç»­å—ä¼¤ï¼‰
     - âœ… å—ä¼¤åé¦ˆï¼ˆé—ªçƒæ•ˆæœæˆ–é¢œè‰²å˜åŒ–ï¼‰

**æ¥å£å®šä¹‰ï¼š**

```gdscript
# Player.gd éœ€è¦æ·»åŠ çš„æ¥å£
func take_damage(amount: int) -> void
func die() -> void
var hp: int
var max_hp: int
var is_invincible: bool  # æ— æ•ŒçŠ¶æ€
```

**éªŒæ”¶æ ‡å‡†ï¼š**

- [ ] ç©å®¶æœ‰ç”Ÿå‘½å€¼æ˜¾ç¤ºï¼ˆå¯ä»¥åœ¨æ§åˆ¶å°æ‰“å°ï¼‰
- [ ] ç©å®¶å¯ä»¥æ¥æ”¶ä¼¤å®³
- [ ] ç©å®¶å—ä¼¤åæœ‰çŸ­æš‚æ— æ•Œæ—¶é—´
- [ ] ç©å®¶ç”Ÿå‘½å€¼å½’é›¶æ—¶è§¦å‘æ­»äº¡

**âš ï¸ æ³¨æ„**: è¿™ä¸€æ­¥å¯ä»¥ä¸Step 1å¹¶è¡Œå¼€å‘ï¼Œä½†å¿…é¡»åœ¨Step 3ä¹‹å‰å®Œæˆï¼

---

#### Step 3: å­å¼¹ä¸æ•Œäººç¢°æ’ï¼ˆå¼€å‘è€…Bï¼Œä¾èµ–Step 1ï¼‰

**é¢„è®¡æ—¶é—´**: 1-2å°æ—¶

**ä»»åŠ¡æ¸…å•ï¼š**

1. å®Œå–„Projectileè„šæœ¬

   - æ–‡ä»¶ï¼š`scripts/projectiles/Projectile.gd`
   - ä¿®æ”¹`_on_body_entered`æ–¹æ³•ï¼š
     - âœ… æ£€æµ‹ç¢°æ’å¯¹è±¡æ˜¯å¦ä¸ºEnemyï¼ˆä½¿ç”¨`is_instance_of`æˆ–æ£€æŸ¥èŠ‚ç‚¹ç»„ï¼‰
     - âœ… è°ƒç”¨æ•Œäººçš„`take_damage()`æ–¹æ³•
     - âœ… å­å¼¹ç¢°æ’åé”€æ¯
     - âœ… æ·»åŠ ä¼¤å®³å€¼å‚æ•°ï¼ˆå¯ä»¥ç¡¬ç¼–ç ä¸º1ï¼Œåç»­æ‰©å±•ï¼‰

2. é…ç½®ç¢°æ’å±‚

   - ç¡®ä¿Projectileçš„`collision_mask`åŒ…å«Enemyå±‚ï¼ˆLayer 2ï¼‰
   - ç¡®ä¿Enemyçš„`collision_layer`è®¾ç½®ä¸ºLayer 2

**éªŒæ”¶æ ‡å‡†ï¼š**

- [ ] å­å¼¹å¯ä»¥å‡»ä¸­æ•Œäºº
- [ ] æ•Œäººå—åˆ°ä¼¤å®³åç”Ÿå‘½å€¼å‡å°‘
- [ ] å­å¼¹å‡»ä¸­æ•Œäººåé”€æ¯
- [ ] æ•Œäººç”Ÿå‘½å€¼å½’é›¶æ—¶æ­»äº¡å¹¶æ¶ˆå¤±

---

#### Step 4: æ•Œäººå¯¹ç©å®¶ç¢°æ’ä¼¤å®³ï¼ˆå¼€å‘è€…Bï¼Œä¾èµ–Step 2ï¼‰

**é¢„è®¡æ—¶é—´**: 1-2å°æ—¶

**ä»»åŠ¡æ¸…å•ï¼š**

1. åœ¨EnemyBaseä¸­æ·»åŠ ç¢°æ’ä¼¤å®³é€»è¾‘

   - æ–‡ä»¶ï¼š`scripts/enemies/base/EnemyBase.gd`
   - æ·»åŠ åŠŸèƒ½ï¼š
     - âœ… æ£€æµ‹ä¸ç©å®¶çš„ç¢°æ’ï¼ˆä½¿ç”¨Area2Dçš„body_enteredä¿¡å·æˆ–CharacterBody2Dçš„ç¢°æ’æ£€æµ‹ï¼‰
     - âœ… ç¢°æ’æ—¶è°ƒç”¨ç©å®¶çš„`take_damage()`æ–¹æ³•
     - âœ… æ·»åŠ ç¢°æ’ä¼¤å®³å†·å´ï¼ˆé˜²æ­¢è¿ç»­ä¼¤å®³ï¼Œä¾‹å¦‚0.5ç§’ï¼‰

2. é…ç½®ç¢°æ’å±‚

   - ç¡®ä¿Enemyçš„`collision_mask`åŒ…å«Playerå±‚ï¼ˆLayer 1ï¼‰
   - ç¡®ä¿Playerçš„`collision_layer`è®¾ç½®ä¸ºLayer 1

**éªŒæ”¶æ ‡å‡†ï¼š**

- [ ] æ•Œäººç¢°æ’ç©å®¶æ—¶é€ æˆä¼¤å®³
   - [ ] ç©å®¶ç”Ÿå‘½å€¼å‡å°‘
   - [ ] ç©å®¶è§¦å‘æ— æ•Œå¸§
   - [ ] æœ‰ç¢°æ’ä¼¤å®³å†·å´ï¼Œä¸ä¼šè¿ç»­å—ä¼¤

---

### ç¬¬äºŒé˜¶æ®µï¼šAIå’Œæˆ˜æ–—å®Œå–„ï¼ˆå¯ä»¥éƒ¨åˆ†å¹¶è¡Œï¼‰

#### Step 5: æ•ŒäººAI - è¿½è¸ªç©å®¶ï¼ˆå¼€å‘è€…Bï¼‰

**é¢„è®¡æ—¶é—´**: 2-3å°æ—¶

**ä»»åŠ¡æ¸…å•ï¼š**

1. åœ¨EnemyBaseä¸­å®ç°AIé€»è¾‘

   - æ–‡ä»¶ï¼š`scripts/enemies/base/EnemyBase.gd`
   - æ·»åŠ åŠŸèƒ½ï¼š
     - âœ… è·å–ç©å®¶ä½ç½®ï¼ˆé€šè¿‡ä¿¡å·æˆ–ç›´æ¥è®¿é—®PlayerèŠ‚ç‚¹ï¼‰
     - âœ… è®¡ç®—æœå‘ç©å®¶çš„æ–¹å‘
     - âœ… å®ç°è¿½è¸ªç§»åŠ¨ï¼ˆæ¯å¸§å‘ç©å®¶æ–¹å‘ç§»åŠ¨ï¼‰
     - âœ… æ·»åŠ ç§»åŠ¨é€Ÿåº¦æ§åˆ¶
     - âœ… æˆ¿é—´è¾¹ç•Œé™åˆ¶ï¼ˆä½¿ç”¨ä¸Playerç›¸åŒçš„room_boundsé€»è¾‘ï¼‰

2. åˆ›å»ºç©å®¶ä½ç½®è·å–æœºåˆ¶

   - æ–¹æ¡ˆAï¼šä½¿ç”¨Autoloadå•ä¾‹ï¼ˆGameManagerï¼‰å­˜å‚¨ç©å®¶å¼•ç”¨
   - æ–¹æ¡ˆBï¼šé€šè¿‡åœºæ™¯æ ‘æŸ¥æ‰¾PlayerèŠ‚ç‚¹
   - æ–¹æ¡ˆCï¼šä½¿ç”¨ä¿¡å·ç³»ç»Ÿï¼ˆPlayerå‘å°„ä½ç½®æ›´æ–°ä¿¡å·ï¼‰

**æ¨èæ–¹æ¡ˆ**: ä½¿ç”¨Autoloadå•ä¾‹ï¼Œä¾¿äºåç»­æ‰©å±•

**éªŒæ”¶æ ‡å‡†ï¼š**

- [ ] æ•Œäººå¯ä»¥è¿½è¸ªç©å®¶
- [ ] æ•Œäººç§»åŠ¨æµç•…
- [ ] æ•Œäººä¸ä¼šç§»å‡ºæˆ¿é—´è¾¹ç•Œ
- [ ] å¤šä¸ªæ•Œäººå¯ä»¥åŒæ—¶è¿½è¸ª

---

#### Step 6: æˆ˜æ–—ç³»ç»Ÿé›†æˆæµ‹è¯•ï¼ˆå¼€å‘è€…Aå’ŒBåä½œï¼‰

**é¢„è®¡æ—¶é—´**: 1å°æ—¶

**ä»»åŠ¡æ¸…å•ï¼š**

1. åˆ›å»ºæµ‹è¯•åœºæ™¯

   - æ–‡ä»¶ï¼š`scenes/test/CombatTest.tscn`
   - åœºæ™¯å†…å®¹ï¼š
     - æˆ¿é—´è¾¹ç•Œ
     - ç©å®¶å®ä¾‹
     - 1-2ä¸ªæ•Œäººå®ä¾‹ï¼ˆæ‰‹åŠ¨æ”¾ç½®ï¼‰

2. åŠŸèƒ½éªŒè¯æ¸…å•

   - [ ] ç©å®¶å¯ä»¥ç§»åŠ¨å’Œå°„å‡»
   - [ ] å­å¼¹å¯ä»¥å‡»ä¸­æ•Œäºº
   - [ ] æ•Œäººå—åˆ°ä¼¤å®³åæ­»äº¡
   - [ ] æ•Œäººå¯ä»¥è¿½è¸ªç©å®¶
   - [ ] æ•Œäººç¢°æ’ç©å®¶é€ æˆä¼¤å®³
   - [ ] ç©å®¶å—ä¼¤åæœ‰æ— æ•Œå¸§
   - [ ] ç©å®¶ç”Ÿå‘½å€¼å½’é›¶æ—¶è§¦å‘æ­»äº¡

---

### ç¬¬ä¸‰é˜¶æ®µï¼šæ•Œäººç±»å‹æ‰©å±•ï¼ˆå¯ä»¥å¹¶è¡Œï¼‰

#### Step 7: å®ç°å¤šç§æ•Œäººç±»å‹ï¼ˆå¼€å‘è€…Bï¼‰

**é¢„è®¡æ—¶é—´**: 3-4å°æ—¶

**ä»»åŠ¡æ¸…å•ï¼š**

1. åˆ›å»ºæ•Œäººç±»å‹è„šæœ¬

   - æ–‡ä»¶ï¼š`scripts/enemies/types/ChaserEnemy.gd`ï¼ˆå¿«é€Ÿè¿½è¸ªå‹ï¼‰
   - æ–‡ä»¶ï¼š`scripts/enemies/types/PatrolEnemy.gd`ï¼ˆå·¡é€»å‹ï¼‰
   - æ–‡ä»¶ï¼š`scripts/enemies/types/ShooterEnemy.gd`ï¼ˆå°„å‡»å‹ï¼Œå¯é€‰ï¼‰

2. å®ç°ä¸åŒçš„ç§»åŠ¨æ¨¡å¼

   - **ChaserEnemy**: å¿«é€Ÿè¿½è¸ªç©å®¶ï¼ˆç§»åŠ¨é€Ÿåº¦æ›´å¿«ï¼‰
   - **PatrolEnemy**: åœ¨å›ºå®šåŒºåŸŸå·¡é€»ï¼Œå‘ç°ç©å®¶åè¿½è¸ª
   - **ShooterEnemy**: ä¿æŒè·ç¦»ï¼Œå‘ç©å®¶å°„å‡»ï¼ˆéœ€è¦æ‰©å±•å°„å‡»ç³»ç»Ÿï¼‰

3. åˆ›å»ºå¯¹åº”çš„åœºæ™¯

   - `scenes/enemies/types/ChaserEnemy.tscn`
   - `scenes/enemies/types/PatrolEnemy.tscn`
   - `scenes/enemies/types/ShooterEnemy.tscn`ï¼ˆå¯é€‰ï¼‰

**éªŒæ”¶æ ‡å‡†ï¼š**

- [ ] è‡³å°‘2ç§ä¸åŒçš„æ•Œäººç±»å‹
- [ ] æ¯ç§æ•Œäººæœ‰ä¸åŒçš„ç§»åŠ¨æ¨¡å¼
- [ ] æ•Œäººå¯ä»¥æ­£å¸¸å—åˆ°ä¼¤å®³å’Œæ­»äº¡
- [ ] ä¸åŒæ•Œäººå¯ä»¥åŒæ—¶å­˜åœ¨

---

#### Step 8: æ•Œäººç”Ÿæˆç³»ç»Ÿï¼ˆå¼€å‘è€…Bä¸»å¯¼ï¼Œå¼€å‘è€…Aæ”¯æŒï¼‰

**é¢„è®¡æ—¶é—´**: 2-3å°æ—¶

**ä»»åŠ¡æ¸…å•ï¼š**

1. åˆ›å»ºæ•Œäººç”Ÿæˆå™¨è„šæœ¬ï¼ˆå¼€å‘è€…Bï¼‰

   - æ–‡ä»¶ï¼š`scripts/enemies/spawners/EnemySpawner.gd`
   - åŠŸèƒ½è¦æ±‚ï¼š
     - âœ… åœ¨æˆ¿é—´å†…éšæœºä½ç½®ç”Ÿæˆæ•Œäºº
     - âœ… æ”¯æŒç”Ÿæˆä¸åŒç±»å‹çš„æ•Œäºº
     - âœ… æ§åˆ¶ç”Ÿæˆæ•°é‡
     - âœ… é¿å…åœ¨ç©å®¶é™„è¿‘ç”Ÿæˆ

2. æˆ¿é—´ç³»ç»Ÿæ”¯æŒï¼ˆå¼€å‘è€…Aï¼‰

   - å¦‚æœRoomç³»ç»Ÿå·²å®ç°ï¼Œæä¾›æˆ¿é—´è¾¹ç•Œå’Œç”ŸæˆåŒºåŸŸ
   - å¦‚æœRoomç³»ç»Ÿæœªå®ç°ï¼Œä½¿ç”¨ç¡¬ç¼–ç çš„æˆ¿é—´è¾¹ç•Œï¼ˆä¸Playerä¸­çš„room_boundsä¸€è‡´ï¼‰

3. åˆ›å»ºç”Ÿæˆå™¨åœºæ™¯

   - æ–‡ä»¶ï¼š`scenes/enemies/spawners/EnemySpawner.tscn`
   - å¯ä»¥é™„åŠ åˆ°Roomåœºæ™¯ä¸­

**æ¥å£çº¦å®šï¼š**

```gdscript
# EnemySpawner.gd æ¥å£
func spawn_enemies(room_bounds: Rect2, enemy_count: int) -> void
func spawn_enemy(enemy_scene: PackedScene, position: Vector2) -> void
```

**éªŒæ”¶æ ‡å‡†ï¼š**

- [ ] å¯ä»¥åœ¨æˆ¿é—´å†…éšæœºç”Ÿæˆæ•Œäºº
- [ ] ç”Ÿæˆä½ç½®åˆç†ï¼ˆä¸åœ¨å¢™å£å†…ï¼Œä¸åœ¨ç©å®¶é™„è¿‘ï¼‰
- [ ] å¯ä»¥æ§åˆ¶ç”Ÿæˆæ•°é‡å’Œç±»å‹
- [ ] ç”Ÿæˆçš„æ•ŒäººåŠŸèƒ½æ­£å¸¸

---

## ğŸ“ å¼€å‘è§„èŒƒ

### ä»£ç æ¥å£çº¦å®š

**EnemyBaseå¿…é¡»å®ç°çš„æ¥å£ï¼š**

```gdscript
# EnemyBase.gd
extends CharacterBody2D  # æˆ– Area2D

var hp: int
var max_hp: int
var move_speed: float

func take_damage(amount: int) -> void
func die() -> void
func _process_ai(delta: float) -> void  # AIé€»è¾‘
```

**Playeréœ€è¦æ·»åŠ çš„æ¥å£ï¼š**

```gdscript
# Player.gd æ–°å¢
var hp: int
var max_hp: int
var is_invincible: bool
var invincible_timer: float

func take_damage(amount: int) -> void
func die() -> void
```

**Projectileéœ€è¦ä¿®æ”¹çš„æ¥å£ï¼š**

```gdscript
# Projectile.gd ä¿®æ”¹
@export var damage: int = 1  # æ–°å¢ä¼¤å®³å€¼

# _on_body_entered éœ€è¦æ£€æµ‹Enemyå¹¶è°ƒç”¨take_damage
```

### ä¿¡å·ç³»ç»Ÿå»ºè®®

**æ¨èä½¿ç”¨ä¿¡å·è¿›è¡Œè§£è€¦ï¼š**

```gdscript

# Player.gd

signal player_died

signal player_took_damage(new_hp: int)

signal position_changed(new_position: Vector2)  # ä¾›AIä½¿ç”¨

# EnemyBase.gd

signal